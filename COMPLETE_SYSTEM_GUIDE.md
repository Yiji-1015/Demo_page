# ğŸš€ LLOYDK ì˜¨ë³´ë”© í¬í„¸ - ì™„ì „í•œ ì‹œìŠ¤í…œ ê°€ì´ë“œ

> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-09
> **ì‘ë™ í™•ì¸**: ì •ìƒ âœ…

---

## ğŸ“‹ ëª©ì°¨

1. [ì „ì²´ ì•„í‚¤í…ì²˜](#1-ì „ì²´-ì•„í‚¤í…ì²˜)
2. [ë°±ì—”ë“œ êµ¬ì¡° ë° API](#2-ë°±ì—”ë“œ-êµ¬ì¡°-ë°-api)
3. [í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°](#3-í”„ë¡ íŠ¸ì—”ë“œ-êµ¬ì¡°)
4. [ë°ì´í„° íë¦„](#4-ë°ì´í„°-íë¦„)
5. [í™˜ê²½ ì„¤ì •](#5-í™˜ê²½-ì„¤ì •)

---

## 1. ì „ì²´ ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ë¸Œë¼ìš°ì €                            â”‚
â”‚                  http://192.168.123.42:5173                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í”„ë¡ íŠ¸ì—”ë“œ (React + Vite)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Home        â”‚  â”‚ Analytics    â”‚  â”‚ Onboarding   â”‚         â”‚
â”‚  â”‚  ëŒ€ì‹œë³´ë“œ     â”‚  â”‚ ì¸ì‚¬ì´íŠ¸     â”‚  â”‚ ì±—ë´‡ ì„œë¹„ìŠ¤   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ë°±ì—”ë“œ (FastAPI) - Port 8000                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Root Server (main.py)                                   â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET  /                     í—¬ìŠ¤ì²´í¬                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ /onboarding/*              ì˜¨ë³´ë”© ì„œë¹„ìŠ¤ ë¼ìš°íŒ…      â”‚   â”‚
â”‚  â”‚  â””â”€ /insight/{path}            ì™¸ë¶€ í”„ë¡ì‹œ (41ë²ˆ ì„œë²„)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Onboarding Module (onboarding/main.py)                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ Confluence API ì—°ë™                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ Qdrant Vector DB                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ Upstage Embedding                                    â”‚   â”‚
â”‚  â”‚  â””â”€ RAG Chatbot                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Confluence API  â”‚     â”‚  Qdrant Vector   â”‚
  â”‚  (Atlassian)     â”‚     â”‚  Database        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| **í”„ë¡ íŠ¸ì—”ë“œ** | React 18, Vite, TailwindCSS, shadcn/ui |
| **ë°±ì—”ë“œ** | FastAPI, Python 3.11 |
| **AI/ML** | Upstage Solar LLM, Upstage Embeddings |
| **ë²¡í„° DB** | Qdrant |
| **ì™¸ë¶€ ì—°ë™** | Confluence REST API |
| **ì»¨í…Œì´ë„ˆ** | Docker, Docker Compose |

---

## 2. ë°±ì—”ë“œ êµ¬ì¡° ë° API

### 2.1 ë£¨íŠ¸ ì„œë²„ êµ¬ì¡°

**íŒŒì¼**: `/backend/main.py`

```
Root FastAPI App
â”œâ”€ CORS ì„¤ì • (ëª¨ë“  origin í—ˆìš©)
â”œâ”€ /onboarding/* â†’ ì˜¨ë³´ë”© ì•± ë§ˆìš´íŠ¸
â””â”€ /insight/* â†’ ì™¸ë¶€ í”„ë¡ì‹œ (192.168.123.41:8000)
```

### 2.2 ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸

#### ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| `GET` | `/` | ì„œë²„ ìƒíƒœ í™•ì¸ |
| `GET` | `/onboarding/` | ì˜¨ë³´ë”© ëª¨ë“ˆ ìƒíƒœ |
| `ALL` | `/insight/{path}` | ì™¸ë¶€ ì„œë²„ í”„ë¡ì‹œ |

#### ì˜¨ë³´ë”© API (Base: `/onboarding/api`)

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| `POST` | `/confluence/connect` | Confluence ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸ |
| `POST` | `/confluence/categories` | ì¹´í…Œê³ ë¦¬ ê³„ì¸µ êµ¬ì¡° ì¡°íšŒ |
| `POST` | `/confluence/filter-pages` | ì¹´í…Œê³ ë¦¬ í•„í„°ë§ |
| `POST` | `/embedding/initialize` | ì„ë² ë”© ì‹œìŠ¤í…œ ì´ˆê¸°í™” |
| `POST` | `/embedding/embed-pages` | í˜ì´ì§€ ì„ë² ë”© ì²˜ë¦¬ |
| `POST` | `/chat` | ì±—ë´‡ ì§ˆë¬¸ (ì¼ë°˜) |
| `POST` | `/chat/stream` | ì±—ë´‡ ì§ˆë¬¸ (ìŠ¤íŠ¸ë¦¬ë°) |
| `GET` | `/collection/info` | ë²¡í„° DB ì»¬ë ‰ì…˜ ì •ë³´ |

---

### 2.3 ìƒì„¸ API ëª…ì„¸

#### 1ï¸âƒ£ Confluence ì—°ê²°

**POST** `/onboarding/api/confluence/connect`

Confluence ì„œë²„ì— ì—°ê²°í•˜ê³  Spaceì˜ í˜ì´ì§€ ì ‘ê·¼ ê¶Œí•œì„ í™•ì¸í•©ë‹ˆë‹¤.

**ìš”ì²­**:
```json
{
  "base_url": "https://your-domain.atlassian.net/wiki",
  "email": "user@example.com",
  "api_token": "your_api_token",
  "space_key": "SPACE"
}
```

**ì‘ë‹µ ì„±ê³µ** (200):
```json
{
  "status": "success",
  "message": "Confluence ì—°ê²° ì„±ê³µ! (ì´ 50ê°œ í˜ì´ì§€)",
  "page_count": 50
}
```

**ì‘ë‹µ ì‹¤íŒ¨** (400):
```json
{
  "detail": "Confluence ì—°ê²° ì‹¤íŒ¨: 403 Forbidden"
}
```

---

#### 2ï¸âƒ£ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ

**POST** `/onboarding/api/confluence/categories`

Confluence Spaceì˜ í˜ì´ì§€ ê³„ì¸µ êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ì—¬ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì •ë¦¬í•©ë‹ˆë‹¤.

**ìš”ì²­**:
```json
{
  "base_url": "https://your-domain.atlassian.net/wiki",
  "email": "user@example.com",
  "api_token": "your_api_token",
  "space_key": "SPACE"
}
```

**ì‘ë‹µ** (200):
```json
{
  "status": "success",
  "categories": {
    "level_1": ["ì¸ì‚¬", "ì¬ë¬´", "ê¸°ìˆ "],
    "level_2": ["ì±„ìš©", "ê¸‰ì—¬", "ê°œë°œ"],
    "level_3": ["ë©´ì ‘", "ì—°ë´‰", "í”„ë¡ íŠ¸ì—”ë“œ"]
  },
  "category_tree": {
    "ì¸ì‚¬": {
      "ì±„ìš©": 5,
      "ê¸‰ì—¬": 3
    }
  },
  "pages": [
    {
      "id": "123456",
      "title": "ì±„ìš© í”„ë¡œì„¸ìŠ¤",
      "path": "ì¸ì‚¬ / ì±„ìš©",
      "url": "https://your-domain.atlassian.net/wiki/spaces/SPACE/pages/123456"
    }
  ],
  "total_pages": 50
}
```

---

#### 3ï¸âƒ£ í˜ì´ì§€ í•„í„°ë§

**POST** `/onboarding/api/confluence/filter-pages?level_1=ì¸ì‚¬&level_2=ì±„ìš©`

ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹í•˜ëŠ” í˜ì´ì§€ ID ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

**ìš”ì²­ Body**:
```json
{
  "base_url": "https://your-domain.atlassian.net/wiki",
  "email": "user@example.com",
  "api_token": "your_api_token",
  "space_key": "SPACE"
}
```

**Query Parameters**:
- `level_1` (optional): ëŒ€ë¶„ë¥˜
- `level_2` (optional): ì¤‘ë¶„ë¥˜
- `level_3` (optional): ì†Œë¶„ë¥˜
- `level_4` (optional): ì„¸ë¶„ë¥˜

**ì‘ë‹µ** (200):
```json
{
  "status": "success",
  "page_ids": ["123456", "789012"],
  "count": 2,
  "filters": {
    "level_1": "ì¸ì‚¬",
    "level_2": "ì±„ìš©"
  }
}
```

---

#### 4ï¸âƒ£ ì„ë² ë”© ì´ˆê¸°í™”

**POST** `/onboarding/api/embedding/initialize`

Qdrant Vector DB ì»¬ë ‰ì…˜ì„ ìƒì„±í•˜ê³  ì„ë² ë”© ì‹œìŠ¤í…œì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

**ìš”ì²­**: ì—†ìŒ

**ì‘ë‹µ** (200):
```json
{
  "status": "success",
  "message": "ì„ë² ë”© ë§¤ë‹ˆì € ë° ì±—ë´‡ ì´ˆê¸°í™” ì™„ë£Œ",
  "collection_info": {
    "points_count": 0,
    "segments_count": 1
  }
}
```

**í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜**:
- `UPSTAGE_API_KEY`
- `QDRANT_URL`
- `QDRANT_API_KEY`

---

#### 5ï¸âƒ£ í˜ì´ì§€ ì„ë² ë”©

**POST** `/onboarding/api/embedding/embed-pages`

ì„ íƒí•œ Confluence í˜ì´ì§€ë“¤ì„ ì„ë² ë”©í•˜ì—¬ ë²¡í„° DBì— ì €ì¥í•©ë‹ˆë‹¤.

**ìš”ì²­**:
```json
{
  "base_url": "https://your-domain.atlassian.net/wiki",
  "email": "user@example.com",
  "api_token": "your_api_token",
  "space_key": "SPACE",
  "page_ids": ["123456", "789012"],
  "collection_name": "confluence_docs"
}
```

**ì‘ë‹µ** (200):
```json
{
  "status": "success",
  "message": "2ê°œ í˜ì´ì§€ ì„ë² ë”© ì™„ë£Œ",
  "embedded_pages": 2
}
```

---

#### 6ï¸âƒ£ ì±—ë´‡ ì§ˆë¬¸ (ì¼ë°˜)

**POST** `/onboarding/api/chat`

RAG ê¸°ë°˜ ì±—ë´‡ì—ê²Œ ì§ˆë¬¸í•˜ê³  ë‹µë³€ì„ ë°›ìŠµë‹ˆë‹¤.

**ìš”ì²­**:
```json
{
  "query": "ì‹ ì… ì‚¬ì› ì±„ìš© ì ˆì°¨ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?",
  "top_k": 3,
  "score_threshold": 0.0
}
```

**ì‘ë‹µ** (200):
```json
{
  "status": "success",
  "answer": "ì‹ ì… ì‚¬ì› ì±„ìš© ì ˆì°¨ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤...",
  "sources": [
    {
      "page_id": "123456",
      "title": "ì±„ìš© í”„ë¡œì„¸ìŠ¤",
      "score": 0.92
    }
  ]
}
```

---

#### 7ï¸âƒ£ ì±—ë´‡ ì§ˆë¬¸ (ìŠ¤íŠ¸ë¦¬ë°)

**POST** `/onboarding/api/chat/stream`

ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹ìœ¼ë¡œ ë‹µë³€ì„ ë°›ìŠµë‹ˆë‹¤. (Server-Sent Events)

**ìš”ì²­**: ìœ„ì™€ ë™ì¼

**ì‘ë‹µ í˜•ì‹** (text/event-stream):
```
data: {"type": "source", "content": {...}}

data: {"type": "answer", "content": "ì‹ ì…"}

data: {"type": "answer", "content": " ì‚¬ì›"}

data: {"type": "done"}
```

---

#### 8ï¸âƒ£ ì»¬ë ‰ì…˜ ì •ë³´ ì¡°íšŒ

**GET** `/onboarding/api/collection/info`

Qdrant ë²¡í„° DBì˜ í˜„ì¬ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**ìš”ì²­**: ì—†ìŒ

**ì‘ë‹µ** (200):
```json
{
  "status": "success",
  "collection_info": {
    "points_count": 150,
    "segments_count": 2
  }
}
```

---

### 2.4 ë°±ì—”ë“œ íŒŒì¼ êµ¬ì¡°

```
backend/
â”œâ”€â”€ main.py                          # ë£¨íŠ¸ FastAPI ì„œë²„
â”œâ”€â”€ Dockerfile                       # ë°±ì—”ë“œ ë„ì»¤ ì´ë¯¸ì§€
â””â”€â”€ onboarding/                      # ì˜¨ë³´ë”© ëª¨ë“ˆ
    â”œâ”€â”€ main.py                      # ì˜¨ë³´ë”© FastAPI ì•±
    â”œâ”€â”€ .env                         # í™˜ê²½ë³€ìˆ˜ (API í‚¤)
    â””â”€â”€ app/
        â”œâ”€â”€ confluence_api.py        # Confluence REST API í´ë¼ì´ì–¸íŠ¸
        â”œâ”€â”€ parser.py                # HTML íŒŒì‹± ë° ì „ì²˜ë¦¬
        â”œâ”€â”€ embedding.py             # Upstage Embedding + Qdrant
        â””â”€â”€ chatbot.py               # RAG ì±—ë´‡ ë¡œì§
```

---

## 3. í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

### 3.1 í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

```
frontend/src/
â”œâ”€â”€ main.jsx                         # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”œâ”€â”€ App.jsx                          # ë¼ìš°íŒ… ì„¤ì •
â”œâ”€â”€ Layout.jsx                       # ê³µí†µ ë ˆì´ì•„ì›ƒ
â”‚
â”œâ”€â”€ pages/                           # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Home.jsx                     # ëŒ€ì‹œë³´ë“œ (ë©”ì¸)
â”‚   â”œâ”€â”€ Analytics.jsx                # ì¸ì‚¬ì´íŠ¸ ë¶„ì„
â”‚   â””â”€â”€ OnboardingService.jsx        # ì˜¨ë³´ë”© ì±—ë´‡ í˜ì´ì§€
â”‚
â”œâ”€â”€ components/                      # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â”œâ”€â”€ Sidebar.jsx              # ì„¤ì • ì‚¬ì´ë“œë°”
â”‚   â”‚   â”œâ”€â”€ ChatArea.jsx             # ì±„íŒ… ì˜ì—­
â”‚   â”‚   â”œâ”€â”€ ChatHistory.jsx          # ëŒ€í™” ê¸°ë¡
â”‚   â”‚   â”œâ”€â”€ MessageBubble.jsx        # ë©”ì‹œì§€ ë§í’ì„ 
â”‚   â”‚   â””â”€â”€ DocumentManager.jsx      # ë¬¸ì„œ ê´€ë¦¬ (Base44 ì—°ë™)
â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”œâ”€â”€ MetricCard.jsx           # ì§€í‘œ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ TrendChart.jsx           # íŠ¸ë Œë“œ ì°¨íŠ¸
â”‚   â”‚   â””â”€â”€ InsightCard.jsx          # ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ
â”‚   â””â”€â”€ ui/                          # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚
â”œâ”€â”€ hooks/                           # ì»¤ìŠ¤í…€ í›…
â”‚   â””â”€â”€ useOnboarding.js             # ì˜¨ë³´ë”© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚
â””â”€â”€ api/                             # API í´ë¼ì´ì–¸íŠ¸
    â”œâ”€â”€ config.js                    # í™˜ê²½ ì„¤ì •
    â”œâ”€â”€ client.js                    # Axios ì¸ìŠ¤í„´ìŠ¤
    â”œâ”€â”€ onboarding.js                # ì˜¨ë³´ë”© API í•¨ìˆ˜
    â”œâ”€â”€ insight.js                   # ì¸ì‚¬ì´íŠ¸ API í•¨ìˆ˜
    â””â”€â”€ index.js                     # í†µí•© export
```

---

### 3.2 í”„ë¡ íŠ¸ì—”ë“œ ìƒì„¸ ì„¤ëª…

#### ğŸ“ `/api` - API ê³„ì¸µ

**1. config.js** - í™˜ê²½ ì„¤ì •
```javascript
export const SERVER_URL = import.meta.env.VITE_SERVER_URL || 'http://localhost:8000';
export const defaultHeaders = {
  'Content-Type': 'application/json',
};
```

**2. client.js** - Axios ì¸ìŠ¤í„´ìŠ¤
```javascript
import axios from 'axios';
import { SERVER_URL } from './config';

// ì˜¨ë³´ë”© API í´ë¼ì´ì–¸íŠ¸
export const onboardingApi = axios.create({
  baseURL: `${SERVER_URL}/onboarding/api`,
  headers: defaultHeaders,
});

// ì¸ì‚¬ì´íŠ¸ API í´ë¼ì´ì–¸íŠ¸ (í”„ë¡ì‹œ)
export const insightApi = axios.create({
  baseURL: `${SERVER_URL}/insight`,
  headers: defaultHeaders,
});
```

**3. onboarding.js** - ì˜¨ë³´ë”© API í•¨ìˆ˜ë“¤
```javascript
import { onboardingApi } from './client';

// Confluence ì—°ê²°
export const connectConfluence = async (config) => {
  return await onboardingApi.post('/confluence/connect', config);
};

// ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
export const getCategories = async (config) => {
  return await onboardingApi.post('/confluence/categories', config);
};

// í˜ì´ì§€ í•„í„°ë§
export const filterPages = async (config, filters) => {
  return await onboardingApi.post('/confluence/filter-pages', config, {
    params: filters
  });
};

// ì„ë² ë”© ì´ˆê¸°í™”
export const initializeEmbedding = async () => {
  return await onboardingApi.post('/embedding/initialize');
};

// í˜ì´ì§€ ì„ë² ë”©
export const embedPages = async (data) => {
  return await onboardingApi.post('/embedding/embed-pages', data);
};

// ì±„íŒ…
export const sendChatMessage = async (query, options = {}) => {
  return await onboardingApi.post('/chat', {
    query,
    top_k: options.top_k || 3,
    score_threshold: options.score_threshold || 0.0
  });
};

// ì»¬ë ‰ì…˜ ì •ë³´
export const getCollectionInfo = async () => {
  return await onboardingApi.get('/collection/info');
};
```

**4. index.js** - í†µí•© export
```javascript
// API í´ë¼ì´ì–¸íŠ¸ export
export { onboardingApi, insightApi } from './client';

// ì˜¨ë³´ë”© API í•¨ìˆ˜ë“¤ export
export * from './onboarding';

// ì¸ì‚¬ì´íŠ¸ API í•¨ìˆ˜ë“¤ export
export * from './insight';
```

---

#### ğŸ“ `/hooks` - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

**useOnboarding.js** - ì˜¨ë³´ë”© ìƒíƒœ ê´€ë¦¬ ë° ë¡œì§

```javascript
import { useState } from 'react';
import { connectConfluence, getCategories, ... } from '../api';

export const useOnboarding = (props) => {
  // ë¡œì»¬ ìƒíƒœ
  const [formData, setFormData] = useState({ ... });
  const [loading, setLoading] = useState({});

  // Confluence ì—°ê²° í•¨ìˆ˜
  const handleConfluenceConnect = async () => {
    setLoading(prev => ({ ...prev, confluence: true }));
    try {
      const response = await connectConfluence(formData);
      props.setConfluenceConnected(true);
      toast.success('ì—°ê²° ì„±ê³µ!');
    } catch (error) {
      toast.error('ì—°ê²° ì‹¤íŒ¨');
    } finally {
      setLoading(prev => ({ ...prev, confluence: false }));
    }
  };

  // ... ê¸°íƒ€ í•¨ìˆ˜ë“¤

  return {
    formData, setFormData,
    loading,
    handleConfluenceConnect,
    handleLoadCategories,
    // ...
  };
};
```

---

#### ğŸ“ `/pages` - í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸

**OnboardingService.jsx** - ë©”ì¸ ì˜¨ë³´ë”© í˜ì´ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header (ì œëª©, ìƒíƒœ ë°°ì§€)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                      â”‚
â”‚  Sidebar     â”‚  ChatArea                            â”‚
â”‚  (ì„¤ì •)      â”‚  (ì±„íŒ… ì˜ì—­)                          â”‚
â”‚              â”‚                                      â”‚
â”‚  - Confluenceâ”‚  - ë©”ì‹œì§€ í‘œì‹œ                        â”‚
â”‚    ì—°ê²°      â”‚  - ì…ë ¥ì°½                             â”‚
â”‚  - ì¹´í…Œê³ ë¦¬  â”‚  - FAQ ë²„íŠ¼                          â”‚
â”‚  - ì„ë² ë”©    â”‚                                      â”‚
â”‚  - ì±„íŒ… ê¸°ë¡ â”‚                                      â”‚
â”‚              â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ìš” ì—­í• **:
- ì „ì²´ ë ˆì´ì•„ì›ƒ ê´€ë¦¬
- ìƒíƒœ ê´€ë¦¬ (ë°±ì—”ë“œ ì—°ê²°, Confluence ì„¤ì • ë“±)
- Sidebarì™€ ChatAreaì— props ì „ë‹¬

---

#### ğŸ“ `/components/onboarding`

**Sidebar.jsx** - ì„¤ì • ì‚¬ì´ë“œë°”

```
íƒ­ 1: ì„¤ì •
â”œâ”€ ë°±ì—”ë“œ ìƒíƒœ
â”œâ”€ Confluence ì—°ê²°
â”‚  â””â”€ URL, Email, Token, Space Key ì…ë ¥
â”œâ”€ ì¹´í…Œê³ ë¦¬ ì„ íƒ
â”‚  â””â”€ ëŒ€ë¶„ë¥˜/ì¤‘ë¶„ë¥˜ í•„í„°
â””â”€ ì„ë² ë”© ê´€ë¦¬
   â””â”€ ì´ˆê¸°í™”, ë¬¸ì„œ ì—…ë¡œë“œ

íƒ­ 2: ì±„íŒ… ë‚´ì—­
â””â”€ ì €ì¥ëœ ëŒ€í™” ì„¸ì…˜ ëª©ë¡
```

- `useOnboarding()` í›… ì‚¬ìš©
- ëª¨ë“  API í˜¸ì¶œ ë¡œì§ ë¶„ë¦¬
- ë¡œë”© ìƒíƒœ í‘œì‹œ

**ChatArea.jsx** - ì±„íŒ… ì˜ì—­

```
ë¹ˆ í™”ë©´ (ë©”ì‹œì§€ ì—†ìŒ)
â”œâ”€ í™˜ì˜ ë©”ì‹œì§€
â””â”€ FAQ ë²„íŠ¼ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)

ì±„íŒ… ì¤‘
â”œâ”€ ë©”ì‹œì§€ ëª©ë¡ (MessageBubble)
â”œâ”€ ë¡œë”© ì¸ë””ì¼€ì´í„°
â””â”€ ì…ë ¥ì°½ + ì „ì†¡ ë²„íŠ¼
```

- ë°ëª¨ ëª¨ë“œ ì§€ì› (ë°±ì—”ë“œ ì—†ì´ ìƒ˜í”Œ ë‹µë³€)
- ì‹¤ì‹œê°„ ì±„íŒ… (ë¹„ë™ê¸° API í˜¸ì¶œ)
- ìë™ ìŠ¤í¬ë¡¤

**MessageBubble.jsx** - ë©”ì‹œì§€ ë§í’ì„ 

```
User Message:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì ì§ˆë¬¸      â”‚
â”‚ (ì˜¤ë¥¸ìª½ ì •ë ¬)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Assistant Message:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI ë‹µë³€         â”‚
â”‚ (ì™¼ìª½ ì •ë ¬)      â”‚
â”‚                 â”‚
â”‚ ğŸ“ ì¶œì²˜:        â”‚
â”‚  - ë¬¸ì„œ 1       â”‚
â”‚  - ë¬¸ì„œ 2       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.3 UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬

**shadcn/ui** - `/components/ui`

í”„ë¡œì íŠ¸ì— í¬í•¨ëœ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸:
- `Button`, `Input`, `Textarea`
- `Select`, `Badge`, `Tabs`
- `Dialog`, `Alert`, `Toast`
- `Card`, `Accordion`, `Table`
- ë“± 60ê°œ ì´ìƒ ì»´í¬ë„ŒíŠ¸

**ìŠ¤íƒ€ì¼**: TailwindCSS ê¸°ë°˜, ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥

---

## 4. ë°ì´í„° íë¦„

### 4.1 ì˜¨ë³´ë”© í”„ë¡œì„¸ìŠ¤ ì „ì²´ íë¦„

```
1ï¸âƒ£ Confluence ì—°ê²°
   í”„ë¡ íŠ¸ì—”ë“œ ì…ë ¥ â†’ POST /onboarding/api/confluence/connect
   â†’ Confluence API í˜¸ì¶œ â†’ í˜ì´ì§€ ì¡°íšŒ ì„±ê³µ/ì‹¤íŒ¨

2ï¸âƒ£ ì¹´í…Œê³ ë¦¬ ì¶”ì¶œ
   ë²„íŠ¼ í´ë¦­ â†’ POST /onboarding/api/confluence/categories
   â†’ í˜ì´ì§€ ê³„ì¸µ êµ¬ì¡° ë¶„ì„ â†’ ì¹´í…Œê³ ë¦¬ íŠ¸ë¦¬ ë°˜í™˜

3ï¸âƒ£ í˜ì´ì§€ í•„í„°ë§
   ì¹´í…Œê³ ë¦¬ ì„ íƒ â†’ POST /onboarding/api/confluence/filter-pages?level_1=XXX
   â†’ í•„í„°ë§ëœ page_ids ë°˜í™˜

4ï¸âƒ£ ì„ë² ë”© ì´ˆê¸°í™”
   ë²„íŠ¼ í´ë¦­ â†’ POST /onboarding/api/embedding/initialize
   â†’ Qdrant ì»¬ë ‰ì…˜ ìƒì„± â†’ Chatbot ì¤€ë¹„ ì™„ë£Œ

5ï¸âƒ£ ë¬¸ì„œ ì„ë² ë”©
   í˜ì´ì§€ ì„ íƒ â†’ POST /onboarding/api/embedding/embed-pages
   â†’ Confluenceì—ì„œ HTML ê°€ì ¸ì˜¤ê¸°
   â†’ íŒŒì‹± ë° ì²­í¬ ë¶„í• 
   â†’ Upstage Embedding API í˜¸ì¶œ
   â†’ Qdrantì— ë²¡í„° ì €ì¥

6ï¸âƒ£ ì±„íŒ…
   ì§ˆë¬¸ ì…ë ¥ â†’ POST /onboarding/api/chat
   â†’ Qdrantì—ì„œ ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰ (Vector Search)
   â†’ Solar LLMìœ¼ë¡œ ë‹µë³€ ìƒì„± (RAG)
   â†’ ë‹µë³€ + ì¶œì²˜ ë°˜í™˜
```

---

### 4.2 í”„ë¡ íŠ¸ì—”ë“œ â†’ ë°±ì—”ë“œ í˜¸ì¶œ íë¦„

```
Component â†’ Hook â†’ API Function â†’ Axios Client â†’ Backend

ì˜ˆì‹œ:
Sidebar.jsx
  â†’ useOnboarding.handleLoadCategories()
    â†’ getCategories(config)
      â†’ onboardingApi.post('/confluence/categories', config)
        â†’ POST http://localhost:8000/onboarding/api/confluence/categories
          â†’ backend/onboarding/main.py @app.post("/api/confluence/categories")
            â†’ ConfluenceClient.get_pages_dataframe()
              â†’ Confluence REST API í˜¸ì¶œ
```

---

## 5. í™˜ê²½ ì„¤ì •

### 5.1 ë°±ì—”ë“œ í™˜ê²½ë³€ìˆ˜

**íŒŒì¼**: `/backend/onboarding/.env`

```bash
# Upstage AI API
UPSTAGE_API_KEY=your_upstage_api_key

# Qdrant Vector Database
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=your_qdrant_api_key

# ì™¸ë¶€ ì„œë²„ í”„ë¡ì‹œ (ì„ íƒì‚¬í•­)
BACKEND41_BASE=http://192.168.123.41:8000
```

---

### 5.2 í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ë³€ìˆ˜

**íŒŒì¼**: `/frontend/.env`

```bash
# ë°±ì—”ë“œ ì„œë²„ ì£¼ì†Œ
VITE_SERVER_URL=http://localhost:8000
```

**ë°°í¬ í™˜ê²½ (ì‹¤ì œ ì„œë²„)**:
```bash
VITE_SERVER_URL=http://192.168.123.42:8000
```

---

### 5.3 Docker Compose ì‹¤í–‰

```bash
# ì»¨í…Œì´ë„ˆ ë¹Œë“œ ë° ì‹¤í–‰
docker compose up -d

# ë¡œê·¸ í™•ì¸
docker compose logs -f backend

# ì¤‘ì§€
docker compose down
```

**ì ‘ì† ì£¼ì†Œ**:
- í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5173
- ë°±ì—”ë“œ: http://localhost:8000

---

## 6. ì£¼ìš” ê¸°ëŠ¥ë³„ ì‚¬ìš© ë°©ë²•

### 6.1 Confluence ë¬¸ì„œ ì„ë² ë”©

1. í”„ë¡ íŠ¸ì—”ë“œ ì ‘ì†: http://192.168.123.42:5173
2. "ì˜¨ë³´ë”© ì„œë¹„ìŠ¤" í´ë¦­
3. Sidebarì—ì„œ Confluence ì •ë³´ ì…ë ¥:
   - Base URL: `https://your-domain.atlassian.net/wiki`
   - Email: `user@example.com`
   - API Token: (Atlassianì—ì„œ ë°œê¸‰)
   - Space Key: `SPACE`
4. "Confluence ì—°ê²°" í´ë¦­
5. "ì¹´í…Œê³ ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°" í´ë¦­
6. ì›í•˜ëŠ” ì¹´í…Œê³ ë¦¬ ì„ íƒ í›„ "í˜ì´ì§€ í•„í„°ë§"
7. "ì„ë² ë”© ì´ˆê¸°í™”" í´ë¦­
8. "ì„ íƒí•œ í˜ì´ì§€ ì„ë² ë”©" í´ë¦­
9. ì™„ë£Œ!

---

### 6.2 ì±—ë´‡ ì‚¬ìš©

1. ì„ë² ë”© ì™„ë£Œ í›„ ì±„íŒ… ì˜ì—­ì—ì„œ ì§ˆë¬¸ ì…ë ¥
2. ì˜ˆì‹œ ì§ˆë¬¸:
   - "ì—°ì°¨ëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?"
   - "ì¬íƒê·¼ë¬´ ì‹ ì²­ ë°©ë²•ì´ ê¶ê¸ˆí•´ìš”"
   - "ê±´ê°•ê²€ì§„ì€ ì–¸ì œ ë°›ë‚˜ìš”?"
3. AIê°€ Confluence ë¬¸ì„œ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€
4. ë‹µë³€ í•˜ë‹¨ì— ì¶œì²˜ ë¬¸ì„œ ë§í¬ í‘œì‹œ

---

### 6.3 ë°ëª¨ ëª¨ë“œ

ë°±ì—”ë“œ ì—†ì´ í”„ë¡ íŠ¸ì—”ë“œë§Œ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´:
1. í”„ë¡ íŠ¸ì—”ë“œ ì ‘ì†
2. "ë°ëª¨ ëª¨ë“œë¡œ ì²´í—˜í•˜ê¸°" ë²„íŠ¼ í´ë¦­
3. ìƒ˜í”Œ Q&Aë¡œ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

---

## 7. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: API í˜¸ì¶œ ì‹¤íŒ¨ (CORS ì—ëŸ¬)

**ì¦ìƒ**:
```
Access to fetch at 'http://localhost:8000' from origin 'http://localhost:5173'
has been blocked by CORS policy
```

**í•´ê²°**:
- `backend/main.py`ì—ì„œ CORS ì„¤ì • í™•ì¸
- `allow_origins=["*"]`ë¡œ ëª¨ë“  origin í—ˆìš©ë¨
- ë°±ì—”ë“œê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸: `docker compose ps`

---

### ë¬¸ì œ 2: Confluence ì—°ê²° ì‹¤íŒ¨ (403 Forbidden)

**ì¦ìƒ**:
```
í˜ì´ì§€ ì¡°íšŒ ì‹¤íŒ¨: 403 Client Error: Forbidden
```

**í•´ê²°**:
1. API í† í°ì´ ìœ íš¨í•œì§€ í™•ì¸
2. í•´ë‹¹ Spaceì— ì½ê¸° ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
3. Space Keyê°€ ì •í™•í•œì§€ í™•ì¸
4. ìƒˆ API í† í° ìƒì„±: https://id.atlassian.com/manage-profile/security/api-tokens

---

### ë¬¸ì œ 3: ì„ë² ë”© ì‹¤íŒ¨

**ì¦ìƒ**:
```
ì´ˆê¸°í™” ì‹¤íŒ¨: í™˜ê²½ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤
```

**í•´ê²°**:
- `/backend/onboarding/.env` íŒŒì¼ í™•ì¸
- `UPSTAGE_API_KEY`, `QDRANT_URL`, `QDRANT_API_KEY` ì„¤ì •
- Docker ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘: `docker compose restart backend`

---

## 8. ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- **Confluence REST API ë¬¸ì„œ**: https://developer.atlassian.com/cloud/confluence/rest/v2/intro/
- **Upstage API ë¬¸ì„œ**: https://developers.upstage.ai/
- **Qdrant ë¬¸ì„œ**: https://qdrant.tech/documentation/
- **FastAPI ë¬¸ì„œ**: https://fastapi.tiangolo.com/
- **React ë¬¸ì„œ**: https://react.dev/

---

## 9. ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ë°±ì—”ë“œ ì£¼ì†Œ** | http://192.168.123.42:8000 |
| **í”„ë¡ íŠ¸ì—”ë“œ ì£¼ì†Œ** | http://192.168.123.42:5173 |
| **API Base** | `/onboarding/api` |
| **ì£¼ìš” ê¸°ìˆ ** | React, FastAPI, RAG, Vector DB |
| **ë°°í¬ ë°©ì‹** | Docker Compose |

---

**ë¬¸ì„œ ì‘ì„±**: Claude Code
**ìµœì¢… ê²€ì¦**: 2026-02-09 âœ…
